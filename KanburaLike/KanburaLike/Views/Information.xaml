<UserControl
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:KanburaLike.Views"
             xmlns:vm="clr-namespace:KanburaLike.ViewModels" 
			 xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
			 xmlns:ei="http://schemas.microsoft.com/expression/2010/interactions"
			 xmlns:l="http://schemas.livet-mvvm.net/2011/wpf"
			 x:Class="KanburaLike.Views.Information"
             mc:Ignorable="d" 
             d:DesignHeight="500" d:DesignWidth="300"			 
			 Background="{DynamicResource ThemeBrushKey}"
			 Foreground="{DynamicResource ActiveForegroundBrushKey}"
			 d:DataContext="{d:DesignData /SampleData/InformationViewModelSampleData.xaml}"
			 >
	<i:Interaction.Triggers>
		<i:EventTrigger EventName="ContentRendered">
			<l:LivetCallMethodAction MethodTarget="{Binding}" MethodName="Initialize"/>
		</i:EventTrigger>
		<i:EventTrigger EventName="Closed">
			<l:DataContextDisposeAction/>
		</i:EventTrigger>
	</i:Interaction.Triggers>

	<UserControl.Resources>
		<ResourceDictionary>
			<AlternationConverter x:Key="LimitedColor">
				<SolidColorBrush Color="White" />
				<SolidColorBrush Color="LightGray" />
				<SolidColorBrush Color="Yellow" />
				<SolidColorBrush Color="Orange" />
				<SolidColorBrush Color="Red" />
			</AlternationConverter>

			<AlternationConverter x:Key="CondColor">
				<SolidColorBrush Color="Yellow" />
				<!-- ConditionType.Brilliant-->
				<SolidColorBrush Color="White" />
				<!-- ConditionType.Normal -->
				<SolidColorBrush Color="LightGray" />
				<!-- ConditionType.Tired-->
				<SolidColorBrush Color="Orange" />
				<!-- ConditionType.OrangeTired -->
				<SolidColorBrush Color="Red" />
				<!-- ConditionType.RedTired -->
			</AlternationConverter>

			<Thickness x:Key="DataMargin">5,0,0,0</Thickness>
			<DataTemplate x:Key="Fleet" DataType="{x:Type vm:ShipViewModel}">
				<StackPanel Orientation="Horizontal">
					<StackPanel.Resources>
						<Style TargetType="TextBlock">
							<Setter Property="Margin" Value="{StaticResource DataMargin}"/>
						</Style>
					</StackPanel.Resources>
					<TextBlock>
						<Run Text="{Binding Index}" />
					</TextBlock>
					<TextBlock TextWrapping="Wrap" Foreground="{Binding Path=ConditionType, Converter={StaticResource CondColor}}">
						<!-- ここからCondで色変え -->
						<Run Text="{Binding Name}"/>
						<Run Text="{Binding Lv, StringFormat=Lv.\{0:D\}}"  />
						<Run Text="{Binding Condition, StringFormat=(\{0:D\})}"  />										
						<Run Text="{Binding ExpForNextLevel, StringFormat=次:\{0:D\}}"  />
						<!-- ここまで -->
					</TextBlock>
					<TextBlock>
						<Run Text="{Binding AirSuperiority, StringFormat=制空:\{0:D\}}" />
					</TextBlock>
					<TextBlock>
						<Run Text="燃" Foreground="{Binding Path=FuelRateIndex, Converter={StaticResource LimitedColor}}"/><Run Text="弾" Foreground="{Binding Path=BullRateIndex, Converter={StaticResource LimitedColor}}"/>
					</TextBlock>
					<TextBlock Foreground="{Binding Path=HPRateIndex,Converter={StaticResource LimitedColor}}">
						<Run Text="{Binding CurrentHP, StringFormat=(\{0:D\}/}"  /><Run Text="{Binding MaxHP, StringFormat=\{0:D\})}"/>
					</TextBlock>
				</StackPanel>
			</DataTemplate>

			<DataTemplate x:Key="Brilliant" DataType="{x:Type vm:ShipViewModel}">
				<StackPanel Orientation="Horizontal">
					<StackPanel.Resources>
						<Style TargetType="TextBlock">
							<Setter Property="Margin" Value="{StaticResource DataMargin}"/>
						</Style>
					</StackPanel.Resources>
					<TextBlock TextWrapping="Wrap">
						<Run Text="{Binding ShipTypeName}" />
					</TextBlock>
					<TextBlock TextWrapping="Wrap" Foreground="{Binding Path=ConditionType, Converter={StaticResource CondColor}}">
						<!-- ここからCondで色変え -->
						<Run Text="{Binding Name}" />
						<Run Text="{Binding Lv, StringFormat=Lv.\{0:D\}}" />
						<Run Text="{Binding Condition, StringFormat=(\{0:D\})}"/>
						<!-- ここまで -->
					</TextBlock>
					<TextBlock>
						<Run Text="燃" Foreground="{Binding Path=FuelRateIndex, Converter={StaticResource LimitedColor}}"/><Run Text="弾" Foreground="{Binding Path=BullRateIndex, Converter={StaticResource LimitedColor}}"/>
					</TextBlock>
					<TextBlock Foreground="{Binding Path=HPRateIndex,Converter={StaticResource LimitedColor}}">
						<Run Text="{Binding CurrentHP, StringFormat=(\{0:D\}/}"  /><Run Text="{Binding MaxHP, StringFormat=\{0:D\})}"/>
					</TextBlock>
				</StackPanel>
			</DataTemplate>

			<DataTemplate x:Key="RepairWaiting" DataType="{x:Type vm:ShipViewModel}">
				<StackPanel Orientation="Horizontal">
					<StackPanel.Resources>
						<Style TargetType="TextBlock">
							<Setter Property="Margin" Value="{StaticResource DataMargin}"/>
						</Style>
					</StackPanel.Resources>
					<TextBlock TextWrapping="Wrap" Foreground="{Binding Path=ConditionType, Converter={StaticResource CondColor}}">
						<!-- ここからCondで色変え -->
						<Run Text="{Binding Name}"/>
						<Run Text="{Binding Lv, StringFormat=Lv.\{0:D\}}"  />
						<Run Text="{Binding Condition, StringFormat=(\{0:D\})}"  />										
						<Run Text="{Binding TimeToRepair, StringFormat=\{0:hh\\:mm\\:ss}"  />
						<!-- ここまで -->
					</TextBlock>
					<TextBlock Foreground="{Binding Path=HPRateIndex,Converter={StaticResource LimitedColor}}" HorizontalAlignment="Right">
						<Run Text="{Binding CurrentHP, StringFormat=(\{0:D\}/}"  /><Run Text="{Binding MaxHP, StringFormat=\{0:D\})}"/>
					</TextBlock>
				</StackPanel>
			</DataTemplate>

			<ResourceDictionary.MergedDictionaries>
				<ResourceDictionary Source="KanColleResource.xaml"/>
			</ResourceDictionary.MergedDictionaries>
		</ResourceDictionary>
	</UserControl.Resources>
	<StackPanel>
		<Button Content="TestCommand" Command="{Binding TestCommand}" />
		<TextBlock TextWrapping="Wrap" Text="あとで提督情報"/>
		<Separator  />
		<TextBlock TextWrapping="Wrap" Text="あとで任務を表示"/>
		<Separator  />
		<ItemsControl ItemsSource="{Binding Fleets}">
			<ItemsControl.ItemTemplate>
				<DataTemplate>
					<Expander IsExpanded="{Binding Ships.IsExpanded}">
						<Expander.Header>
							<TextBlock TextWrapping="Wrap" HorizontalAlignment="{Binding HorizontalAlignment, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ContentPresenter}}, Mode=OneWayToSource}">
								<Run Text="{Binding Name}" />
								<Run Text="{Binding SumLv ,StringFormat=Lv合計(\{0:D\})}" />
								<Run Text="{Binding SumAirSuperiority,StringFormat=制空合計(\{0:D\})}" />
							</TextBlock>
						</Expander.Header>
						<StackPanel>
							<Separator />
							<ItemsControl ItemsSource="{Binding Ships.Ships}" ItemTemplate="{DynamicResource Fleet}" >
							</ItemsControl>
						</StackPanel>
					</Expander>
				</DataTemplate>
			</ItemsControl.ItemTemplate>
		</ItemsControl>
		<Separator  />
		<ScrollViewer>
		<Expander DataContext="{Binding Brilliant}">
			<Expander.Header>
				<TextBlock TextWrapping="Wrap" HorizontalAlignment="{Binding HorizontalAlignment, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ContentPresenter}}, Mode=OneWayToSource}">
					<Run Text="キラキラーズ" />
					<!--<Run Text="{Binding Count ,StringFormat=(\{0:D\} 隻)}" />-->
				</TextBlock>
			</Expander.Header>
			<ItemsControl ItemsSource="{Binding Ships}" ItemTemplate="{DynamicResource Brilliant}" >
			</ItemsControl>
		</Expander>
		</ScrollViewer>
		<Separator  />
		<ScrollViewer>
			<Expander DataContext="{Binding RepairWaiting}">
				<Expander.Header>
					<TextBlock TextWrapping="Wrap" HorizontalAlignment="{Binding HorizontalAlignment, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ContentPresenter}}, Mode=OneWayToSource}">
					<Run Text="入渠待ちーズ" />
					<!--<Run Text="{Binding Count ,StringFormat=(\{0:D\} 隻)}" />-->
					</TextBlock>
				</Expander.Header>
				<ItemsControl ItemsSource="{Binding Ships}" ItemTemplate="{DynamicResource RepairWaiting}" >
				</ItemsControl>
			</Expander>
		</ScrollViewer>
	</StackPanel>
</UserControl>
